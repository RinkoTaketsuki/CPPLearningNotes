# ls 命令

> 全称：list

## 1. 语法

`ls [OPTION]... [FILE]...`

> `FILE` 为空相当于 `FILE` 为 `.`

## 2. 常用选项

|选项|含义|
|:-|:-|
|`-a`|显示隐藏文件|
|`-t`|按时间降序显示|
|`-r`|逆序显示|
|`-l`|以详细信息形式显示每个文件条目，每个条目单独占一行|
|`-i`|在每个条目前显示 inode 编号|
|`-s`|在每个条目前显示文件占用的块数对应的大小（单位：KiB）|
|`-F`|在目录名后面显示 `/` 符号，在可执行文件后面显示 `*` 符号|
|`-R`|递归显示所有子目录下的内容（包含当前指定的目录）|

> 文件列表的默认顺序：按文件名升序显示
>
> 单个文件信息的显示顺序：i s l

## 3. `-l` 的显示内容说明

> 当使用 `-l` 选项时，若要把软链接文件当作目录文件，则要在文件名后面加 `/` 符号，否则仅会把当前文件当作普通文件来显示。

```sh
ecs-user@ALIYUN-ECS:~$ ll /lib64
lrwxrwxrwx 1 root root 9 Apr 21  2022 /lib64 -> usr/lib64/
ecs-user@ALIYUN-ECS:~$ ll /lib64/
total 8
drwxr-xr-x  2 root root 4096 Dec 28 17:49 ./
drwxr-xr-x 14 root root 4096 Apr 21  2022 ../
lrwxrwxrwx  1 root root   42 Jul  7  2022 ld-linux-x86-64.so.2 -> /lib/x86_64-linux-gnu/ld-linux-x86-64.so.2*
lrwxrwxrwx  1 root root   20 Dec 28 17:49 ld-lsb-x86-64.so.2 -> ld-linux-x86-64.so.2*
lrwxrwxrwx  1 root root   20 Dec 28 17:49 ld-lsb-x86-64.so.3 -> ld-linux-x86-64.so.2*
```

### 3.1 `total` 行

仅在显示目录中所有文件的详细信息时才会出现，后面跟一个数字表示当前目录下显示的所有文件所占的块数之和对应的大小（单位：KiB），包括 `.` 和 `..` 目录文件。

### 3.2 第一列

|第一列第一个字符|含义|
|:-|:-|
|`-`|普通文件|
|`b`|块设备文件|
|`c`|字符设备文件|
|`d`|目录文件|
|`l`|软链接文件|
|`p`|管道文件|
|`s`|socket 文件|

第一列的其他字符表示各种文件权限，前三个字符表示文件所属用户的权限，中间三个字符表示文件所属组包含的用户的权限，最后三个字符表示其他所有人的权限。

由此，可以认为权限分为三组，每组三个字符。其中任意一组的三个字符含义如下：

1. 第一个字符为 `r` 或 `-`，若为 `r` 则表示有读权限
2. 第二个字符为 `w` 或 `-`，若为 `w` 则表示有写权限
3. 第三个字符通常为 `x` 或 `-`，也有可能是其他字符，若为 `x` 则表示有执行权限

第一列也有可能包含 11 个字符。

> `touch` 和 `vim` 命令创建的文件的默认第一列为 `-rw--rw-r--`

### 3.3 其他列

若当前行的文件不是目录文件，则第二列的值为硬链接计数，否则第二列的值代表包含多少个子目录（包括 `.` 和 `..`）。

第三列表示文件的所属用户，第四列表示文件的所属组。

第五列表示文件大小（单位：字节）。

第六列表示文件的最后修改日期（可用 `touch` 命令刷新）。

第七列显示文件名，一般会令不同类型的文件显示不同的颜色，若是软链接文件则会显示其指向的文件。
