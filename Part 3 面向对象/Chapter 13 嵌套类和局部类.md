# Chapter 13 嵌套类和局部类

## 1. 嵌套类

嵌套类在外层类中定义了一个类型成员，该类型的访问权限由外层类决定，即如果嵌套类是 `protected` 的，则只有外层类内部、外层类的派生类和外层类的友元可以访问  
注意类型成员必须先声明后使用，即便是在外层类的内部，但只声明了的嵌套类是不完全类型，不能在外层类中使用  
嵌套类只能使用外层类的静态成员、类型成员和枚举成员  
外层类和嵌套类相互独立，其对象不互相包含成员  

```C++
class OUT
{
    class IN;
    IN mem; // 错误，IN 是不完全类型
    int mem2;
    static int smem;
    typedef int integer;
};

OUT::smem = 42;

class OUT::IN
{
    integer m1 = mem2; // 错误
    integer m2 = smem; // 正确
public:
    IN(integer, integer);
};

OUT::IN::IN(OUT::integer n1, OUT::integer n2)
{
    /* construct function */
}
```

## 2. 局部类

局部类定义在函数内部，只在其被定义的作用域内可见  
局部类的所有成员都必须完整定义在类内部，因此无法定义静态成员  
局部类只能访问外层作用域定义的类型名、静态变量和枚举成员  
外层函数对局部类成员无访问特权，但局部类可将外层函数设为友元，通常将局部类所有成员设为公有  
局部类可以声明其嵌套类，嵌套类的定义可以在局部类之外，但必须在和局部类相同的作用域中  
局部类的嵌套类也是局部类，需遵守局部类的各种规定  
